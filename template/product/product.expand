{% set ALT_IMAGE = product_name %}

{% if attribute_groups|length > 0 %}
    {% for attribute_group in attribute_groups %}
        {% if attribute_group['name'] == 'NOSHOW' %}
            {% for attribute in attribute_group['attribute'] %}
                {% if attribute['name'] == 'ALT_IMAGE' %}
                    {% set ALT_IMAGE = attribute['text'] %}
                {% endif %}
            {% endfor %}
        {% endif %}
    {% endfor %}
{% endif %}
<style type="text/css">
    .modal-backdrop {
        z-index: 99 !important;
}
</style>
<div id="notification"></div>
{% if product_designer is defined and product_designer == 1 %}
<style>
    .modal-title {
    {% if pd_options['back_color'] is defined and pd_options['back_color'] != '' %}
        color: {{ pd_options['back_color'] }};
    {% endif %}
    {% if pd_options['cust_fw'] is defined and pd_options['cust_fw'] != '' %}
        font-style: italic;
    {% endif %}
    }
</style>
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" style="z-index: 99999;">
    <div class="modal-dialog modal-lg" role="document" style="width:735px;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                <h4 class="modal-title" id="myModalLabel">{{ lang('cust_header_text') }}</h4>
            </div>
            <div class="modal-body" style="padding:0px !important;">
                <iframe id="design_pop_frame" src="" scrolling="no" width="730" height="520" frameborder="0"></iframe>
                <div style="clear:both;"></div>
            </div>
        </div>
    </div>
</div>
{% endif %}

{% if pricePerMeters == 1 and price_meter_data['main_status'] == 1 %}
    <div class="modal fade" id="myModalPrMeter" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" style="z-index: 99999;">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                    <h4 class="modal-title" id="myModalLabel">{{ lang('text_estimate_amount') }}</h4>
                </div>
                <div class="modal-body" style="padding-top: 0">
                    <div class="product-add-form">
                        <div class="option form-group">
                            
                            <div class="control col-md-4" style="font-size: 12px;padding-left: 0;">
                                <input type="hidden" id='set_meter_on' value="0" />

                                <input type="hidden" name='pricePerMeter[main_status]' value="{{ price_meter_data['main_status'] }}" />
                                <input type="hidden" name='pricePerMeter[metalprofile_status]' value="{{ price_meter_data['metalprofile_status'] }}" />
                                <input type="hidden" name='pricePerMeter[skirtings_status]' value="{{ price_meter_data['skirtings_status'] }}" />
                                <input type="hidden" name='pricePerMeter[main_package_size]' value="{{ price_meter_data['main_package_size'] }}" />
                                <input type="hidden" name='pricePerMeter[skirtings_package_size]' value="{{ price_meter_data['skirtings_package_size'] }}" />
                                <input type="hidden" name='pricePerMeter[main_unit]' value="{{ price_meter_data['main_unit'] }}" />

                                <label class="col-md-6 col-form-label" style="padding-left: 0;">{{ lang('text_room_width') }}</label>
                                <div class="col-md-6">
                                  <span>
                                    <input type="text" name="pricePerMeter[width]" onkeyup="setMeterAction(false)" class="form-control" id="set_meter_w" style="width: 72%;height: 30px;color:#333;display: inherit;font-size: 11px;" />
                                    </span>
                                    <span>{{ lang('text_meter') }}</span>
                                </div>
                                <div style="clear: both;"></div>
                                <label class="col-md-6 col-form-label" style="padding-left: 0;">{{ lang('text_room_length') }}</label>
                                <div class="col-md-6">
                                    <span>
                                         <input type="text" name="pricePerMeter[length]" onkeyup="setMeterAction(false)" class="form-control" id="set_meter_l" style="width: 72%;height:30px;color:#333;display: inherit;font-size: 11px;" />
                                        <span>{{ lang('text_meter') }}</span>
                                  </span>
                                </div>
                                <div style="clear: both;"></div>
                                <label class="col-md-6 col-form-label" style="padding-left: 0;">{{ lang('text_dimention') }}</label>
                                <div class="col-md-6">
                                    <span>
                                        <input type="text" class="form-control" id="set_meter_wl" value="0" disabled="true" style="width: 72%;height: 30px;color:#333;display: inherit;font-size: 11px;" />
                                        <span>{{ lang('text_meter') }}<span style="font-size: 10px;vertical-align: top;">2</span></span>
                                    </span>
                                </div>
                                <div style="clear: both;padding-top: 20px"></div>
                                {% if price_meter_data['metalprofile_status'] == 1 %}
                                <label class="col-md-6 col-form-label" style="padding-left: 0;">{{ lang('text_doors_number') }}</label>
                                <div class="col-md-6">
                                  <input type="text" name="pricePerMeter[doors]" onkeyup="setMeterAction(false)" class="form-control" id="set_meter_d"  style="width: 82%;height: 30px;color:#333;display: inherit;font-size: 11px;" />
                                </div>
                                <div style="clear: both;"></div>
                                <label class="col-md-6 col-form-label" style="padding-left: 0;">{{ lang('text_door_width') }}</label>
                                <div class="col-md-6">
                                  <input type="text" name="pricePerMeter[doorW]" onkeyup="setMeterAction(false)" class="form-control" id="set_meter_dw" style="width: 82%;height: 30px;color:#333;display: inherit;font-size: 11px;" />
                                </div>
                                {% endif %}
                            </div>
                            <div  class="control col-md-4" style="font-size: 12px">
                                <label>{{ lang('text_perimeter') }}:</label> <span class='prMeterP'>--</span> {{ lang('text_meter') }}<br/>
                                <label>{{ lang('text_package_size') }}:</label> <span>{{ price_meter_data['main_package_size'] }} {{ lang('text_meter') }}
                                {% if price_meter_data['main_unit'] == '2' %}
                                    <span style="font-size: 10px;vertical-align: top;">2</span>
                                {% endif %}
                                </span><br/>
                                {% if price_meter_data['main_price_percentage'] > 0 %}
                                <label>{{ lang('text_add_percentage') }}:</label> <span>{{ price_meter_data['main_price_percentage'] }}</span> %<br/>
                                {% endif %}

                                <label><strong>{{ lang('text_quantity') }}:</strong></label> <span class='prMeterMainBoxs'>--</span> {{ lang('text_box') }}<br/>
                            </div>
                            <div  class="control col-md-4"  style="font-size: 12px">
                                <label>{{ lang('text_accessories') }}</label>
                                <hr style="margin: 0;padding-bottom: 5px;">
                                 {% if price_meter_data['skirtings_status'] %}
                                 <label>{{ lang('text_skirtings') }}:</label> <span class="prMeterSki">--</span> {{ lang('text_meter') }}<br/>
                                 {% endif %}
                                 {% if price_meter_data['metalprofile_status'] %}
                                <label>{{ lang('text_metalprofiles') }}:</label> <span class="prMeterMetal">--</span> {{ lang('text_meter') }}<br/>({{ price_meter_data['metalprofile_package_size'] }} {{ lang('text_meter') }})<br/>
                                {% endif %}
                                <label><strong>{{ lang('text_quantity') }}:</strong></label> <span class="prMeterMain">--</span> {{ lang('text_meter') }}
                                {% if price_meter_data['main_unit'] == '2' %}
                                    <span style="font-size: 10px;vertical-align: top;">2</span>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div style="clear:both;"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick='setMeterAction(true)'>{{ lang('text_save') }}</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">{{ lang('text_close') }}</button>
                  </div>
            </div>
        </div>
    </div>
{% endif %}
<div id="content">
    <!-- breadcrumb -->
    <div class="tt-breadcrumb">
        <div class="container">
            <ul>
                {% for breadcrumb in breadcrumbs %}
                    {% if loop.last %}
                        <li class="active">{{ breadcrumb['text'] }}</li>
                    {% else %}
                        <li><a href="{{ breadcrumb['href'] }}">{{ breadcrumb['text'] }}</a></li>
                    {% endif %} 
                {% endfor %}			
            </ul>
        </div>
    </div>
    <!-- breadcrumb -->
    <div class="content-page">
        <div class="container">
            <div class="row">
                <!-- New Product --->
                <div id="tt-pageContent" style='width: 100%'>
                        <div class="container-indent">
                            <!-- mobile product slider  -->
                            <div class="tt-mobile-product-layout visible-xs">                                
                                {% if images|length > 1 %}
                                <div class="tt-mobile-product-slider arrow-location-center slick-animated-show-js"> 
                                    {% for image in images %}                                            
                                        <div><img src="{{ image(image.image, 600, 600) }}" alt="{{ ALT_IMAGE }}"></div>                                            
                                    {% endfor %}                
                                </div>                                    
                                {% else %}    
                                <div>
                                    <img src="{{ image(image, 600, 600) }}" alt="{{ ALT_IMAGE }}">
                                </div>
                                {% endif %}                                                                                                                                            
                            </div>
                            <!-- /mobile product slider  -->
                            <div class="container container-fluid-mobile">
                                <div class="row">
                                    <div class="col-6 hidden-xs">
                                        <div class="tt-product-vertical-layout">
                                            <div class="{{  images|length > 1?'tt-product-single-img':'' }}">
                                                {#% if special != ''%}
                                                    <span id="discount_badge" class="badge badge-danger danger">-{{saving}}%</span>
                                                {% endif %#}
                                                {% if image != '' %}                                
                                                <div>
                                                    {% if images|length > 1 %}
                                                    <button class="tt-btn-zomm tt-top-right"><i class="icon-f-86"></i></button>                                
                                                    {% endif %}
                                                    <img class="zoom-product" src='{{ image(image, 500, 500) }}' 
                                                    data-zoom-image="{{ image(image, 800, 800) }}" alt="{{ ALT_IMAGE }}">
                                                </div>
                                                {% endif %}
                                            </div>                        
                                            {% if images|length != '' %}                                
                                            <div class="tt-product-single-carousel-vertical">
                                                {% if images|length > 2 %}
                                                <ul id="smallGallery" class="tt-slick-button-vertical slick-animated-show-js">
                                                    {% for image in images|slice(0,1) %}
                                                    <li>
                                                        <a class="zoomGalleryActive" href="#" 
                                                            data-image="{{ image(image.image, 600, 600) }}" 
                                                            data-zoom-image="{{ image(image.image, 800, 800) }}">
                                                            <img src="{{ image(image.image, 600, 600) }}" alt="{{ ALT_IMAGE }}">
                                                        </a>
                                                    </li>
                                                    {% endfor %}
                                                    {% for image in images|slice(1) %}
                                                    <li>
                                                        <a  href="#" 
                                                            data-image="{{ image(image.image, 600, 600) }}" 
                                                            data-zoom-image="{{ image(image.image, 600, 600) }}">
                                                            <img src="{{ image(image.image, 600, 600) }}" alt="{{ ALT_IMAGE }}">
                                                        </a>
                                                    </li>
                                                    {% endfor %}
                                                </ul>
                                                {% endif %}
                                            </div>
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class="{{ image != '' or images|length > 0 ? 'col-6' : 'col-12' }}">
                                        <div class="tt-product-single-info">
                                            <div class="tt-add-info">
                                                <ul>                                                         
                                                    <li><span>{{ lang('text_stock') }}</span> {{ stock ? stock : stock_status  }}</li>
                                                </ul>
                                            </div>                        
                                            <h1 class="tt-title">{{ product_name }}</h1>
                                            <!--- Start Price --->
                                            {% if ('-1' not in price) and ('-1' not in special) %}    
                                                <div class="tt-price new-price">
                                                        <input type="hidden" id="currency_symbols_left" value='{{currency_symbols["left"]}}'>
                                                        <input type="hidden" id="currency_symbols_right" value='{{currency_symbols["right"]}}'>
                                                        {% if pricePerMeters == 1 %}
                                                        {% if price_meter_data['main_status'] == 1 %}
                                                            {% if special %}
                                                                <ins><span>{{ special }}</span></ins>
                                                            {% endif %}      
                                                            <span>{{currency_symbols["left"]}}{{ price_meter_data['main_meter_price'] }}{{currency_symbols["right"]}}/Meter</span>
                                                            <input type="hidden" id="price_value" value="{{ price_meter_data['main_meter_price'] }}">
                                                        {% else %}
                                                                {% if special %}
                                                                <input type="hidden" id="price_value" value="{{ special_value }}">
                                                                <ins><span class="price_display">{{ special }}</span></ins>
                                                                <del><span>{{ price }}</span></del>
                                                            {% else %}
                                                                <input type="hidden" id="price_value" value="{{ price_value }}">
                                                                <ins><span class="price_display">{{ price }}</span></ins>
                                                            {% endif %}
                                                        {% endif %}
                                                    {% else %}
                                                        {% if special %}
                                                            <input type="hidden" id="price_value" value="{{ special_value }}">
                                                            <ins><span class="price_display">{{ special }}</span></ins>
                                                            <del><span>{{ price }}</span></del>
                                                        {% else %}
                                                            <input type="hidden" id="price_value" value="{{ price_value }}">
                                                            <ins><span class="price_display new-price">{{ price }}</span></ins>
                                                        {% endif %}
                                                    {% endif %}
                    
                                                    {% if tax != "0" %}
                                                    <span class="price-tax">
                                                        {% if tax_included_val is defined and tax_included_val %}
                                                            {{ lang('text_included_tax') }}
                                                        {% else %}
                                                            {{ lang('text_tax') }} {{ tax }}
                                                        {% endif %}    
                                                        </span><br/>
                                                    {% else %}
                                                        <br/>
                                                    {% endif %}
                    
                                                    {% if points > 0 %}
                                                        <span class="reward"><small>{{ lang('text_points') }} {{ points }}</small></span>
                                                    {% endif %}
                    
                                                    {% if discounts|length > 0 %}                                    
                                                        <div class="discount">
                                                            <h6>{{lang('text_discount_more')}} : </h6>
                                                            {% for discount in discounts %}
                                                                {{ lang('text_discount')|format(discount.quantity, discount.price) }}
                                                            {% endfor %}
                                                        </div>
                                                    {% endif %}
                                                </div>
                                            {% endif %}
                                            <!--- End Price --->
                                            <!--- Start Review --->
                                            {% if review_status != '' and config('config_review_status') == '1'  %}
                                            <div class="tt-review">
                                                <div clvass="rating-action" style="margin-bottom: 5px;">
                                                    <img src="{{ asset('image/stars-' ~ rating ~ '.png') }}"
                                                        alt="{{ lang('text_reviews')|format(reviews_count) }}"/>&nbsp;&nbsp;
                                                </div>                                							
                                                <a class="product-page-gotocomments-js" href="#review-user" role="tab" data-toggle="tab"> {{ lang('Customer Review')|format(reviews_count) }}</a>
                                            </div>
                                            {% endif %}
                                            <!--- End Review --->
                                            <!--- Start description  --->
                                            <div class="tt-wrapper">
                                                {{ short_description }}
                                            </div>
                                            <!--- End description  --->                        
                                            
                                            <p class="desc">
                                                {% if minimum_limit > 1 %}
                                                    {{ lang('text_minimum')|format(minimum_limit) }} <br>
                                                {% endif %}
                                                {% if manufacturer %}
                                                    <span class="">{{ lang('text_manufacturer') }}</span>
                                                     <a href="{{ manufacturers }}">{{ manufacturer }}</a><br/>
                    
                                                    {% if config('show_brands') and manufacturerimg %}
                                                    <a href="{{manufacturer_href}}" id="brandImage_inner" alt"{{ manufacturer }}">
                                                        <img src="{{image(manufacturerimg) }}" alt="{{ manufacturer }}" width= '25' height='40'>
                                                    </a>
                                                    {% endif %}
                    
                                                {% endif %}
                                                <span class="">{{ lang('text_model') }}</span> {{ model }}<br/>
                                                {% if show_point_detail and reward %}
                                                    <span class="">{{ lang('text_reward') }}</span> {{ reward }}<br/>
                                                {% endif %}
                                                    {% if pricePerMeters == 1 %}
                                                        {% if price_meter_data['main_status'] == 1 %}
                                                            {% if price_meter_data['skirtings_status'] %}
                                                            - <span><strong>{{ lang('text_skirtings') }}:</strong></span> <span class="prMeterSki">--</span> {{ lang('text_meter') }}<br/>
                                                            {% endif %}
                                                            {% if price_meter_data['metalprofile_status'] %}
                                                            - <span><strong>{{ lang('text_metalprofiles') }}:</strong></span> <span class="prMeterMetal">--</span> {{ lang('text_meter') }}<br/>({{ price_meter_data['metalprofile_package_size'] }} {{ lang('text_meter') }})<br/>
                    
                                                            {% endif %}
                                                        - <span><strong>{{ lang('text_quantity') }}:</strong></span> <span class="prMeterMain">--</span> {{ lang('text_box') }}
                                                        
                                                        <br/>
                    
                                                        - <span style='font-weight:bold'>{{ lang('text_total_price') }}</span>:<span class='prMeterPrice'>0</span> - 
                                                          <span>
                                                            <a style='text-decoration:underline' href='javascript://' onclick='showSetMeterModal()'>[{{ lang('text_click_edit_dimention') }}]</a>
                                                          </span>
                                                        <br/>
                                                    {% endif %}
                                                {% endif %}
                                            </p>
                                            <!--- Start App && From Prodect -->						
                                            {% if rentalProducts == 1 %}
                                                {% if transaction_type == 2 %}
                                                <div class="product-add-form">
                                                    <div class="option form-group">
                                                        <label>{{ lang('label_rental_range') }}</label>
                                                        <div class="control">
                                                            {{ lang('text_range_from') }} <input class="dateRangeFrom form-control" type="text"
                                                                    readonly="true" name="dateRange[from]" />
                                                            {{ lang('text_range_to') }} <input class="dateRangeTo form-control" type="text"
                                                                    readonly="true" name="dateRange[to]" />
                                                        </div>
                                                    </div>
                                                </div>
                                                {% endif %}
                                            {% endif %}
                                            {% if product_designer is defined and product_designer == 1 %}
                                                <button type="button" title="{{ lang('pd_btn_text') }}"
                                                        onclick="showpopup({{ product_id }},'FFFFFF');"
                                                        class="action btn-cart addcart-link">
                                                    <span>{{ lang('pd_btn_text') }}</span>
                                                </button>
                                                <script>
                                                    function showpopup(pid,ccode) {
                                                        var frameSrc = 'index.php?route=module/product_designer&product_id='+pid+'&procolor='+ccode;
                                                        $('#design_pop_frame').attr("src",frameSrc);
                                                        $('#myModal').modal({show:true});
                                                    }
                                                    function closeModel(){
                                                        $('#myModal').modal('hide');
                                                    }
                                                    function addcart(proId,qty,cust_id){
                                                        addToCartCustom(proId,qty,cust_id);
                                                    }
                                                </script>
                                                <style>
                                                    .modal {
                                                        text-align: center;
                                                        padding: 0!important;
                                                    }
                    
                                                    .modal:before {
                                                        content: '';
                                                        display: inline-block;
                                                        height: 100%;
                                                        vertical-align: middle;
                                                        margin-right: -4px;
                                                    }
                    
                                                    .modal-dialog {
                                                        display: inline-block;
                                                        text-align: left;
                                                        vertical-align: middle;
                                                    }
                                                </style>
                                            {% endif %}
                                            <div class="product-add-form">
                                                <form>
                                                    {% if options %}
                                                        <div class="product-options-wrapper">
                                                            {% if options %}
                                                                <div class="options">
                                                                    {% for option in options %}
                                                                        {% if option.type == 'select' %}
                                                                        <div id="option-{{ option.product_option_id }}"
                                                                            class="option form-group">
                                                                            <label for="option[{{ option.product_option_id }}]">{{ option.name }} {{ option.required ? '<sup>*</sup>' : '' }} </label>
                                                                            <div class="control">
                                                                                <select name="option[{{ option.product_option_id }}]"
                                                                                        id="option[{{ option.product_option_id }}]"
                                                                                        class="form-control" onchange="getSelectPrice(this.value,'{{ option.product_option_id }}')">
                                                                                    <option value="">{{ lang('text_select') }}</option>
                                                                                    {% for option_value in option.option_value %}
                                                                                    <option value="{{ option_value.product_option_value_id }}">{{ option_value.name }}
                                                                                        {% if option_value.price %}
                                                                                        ({{ option_value.price_prefix }}{{ option_value.price }})
                                                                                        {% endif %}
                                                                                    </option>
                                                                                    {% endfor %}
                                                                                </select>
                                                                                {% for option_value in option.option_value %}
                                                                                    <input type="hidden" id="select-price-{{ option_value.product_option_value_id }}" value="{{ option_value.price_value }}">
                                                                                    <input type="hidden" id="select-prifex-{{ option_value.product_option_value_id }}" value="{{ option_value.price_prefix }}">
                                                                                {% endfor %}
                                                                            </div>
                                                                            <input type="hidden" 
                                                                                    id="old_select_price-{{ option.product_option_id }}" 
                                                                                    value="">
                                                                            <input type="hidden" 
                                                                                    id="old_select_prefix-{{ option.product_option_id }}" 
                                                                                    value="">
                                                                        </div>
                                                                        {% endif %}
                    
                                                                        {% if option.type == 'radio' %}
                                                                        <fieldset id="option-{{ option.product_option_id }}"
                                                                                class="option form-group">
                                                                            <label for="option[{{ option.product_option_id }}]">{{ option.name }} {{ option.required ? '<sup>*</sup>' : '' }} </label>
                                                                            {% for option_value in option.option_value %}
                                                                            <div class="form-check">
                                                                                <label class="form-check-label">
                                                                                    <input type="radio" class="form-check-input"
                                                                                        name="option[{{ option['product_option_id'] }}]"
                                                                                        id="option-value-{{ option_value['product_option_value_id'] }}"
                                                                                        value="{{ option_value['product_option_value_id'] }}" onclick="getRadioPrice('{{ option_value['price_value'] }}', '{{ option_value['price_prefix'] }}','{{ option.product_option_id }}', 'radio')">
                                                                                    {{ option_value['name'] }}
                                                                                    {% if option_value.price %}
                                                                                        ({{ option_value.price_prefix }}{{ option_value.price }})&#x200E;
                                                                                    {% endif %}
                                                                                </label>
                                                                            </div>
                                                                            {% endfor %}
                                                                            <input type="hidden" 
                                                                                    id="old_radio_price-{{ option.product_option_id }}" 
                                                                                    value="">
                                                                            <input type="hidden" 
                                                                                    id="old_radio_prefix-{{ option.product_option_id }}" 
                                                                                    value="">
                                                                        </fieldset>
                                                                        {% endif %}
                    
                                                                        {% if option.type == 'checkbox' %}
                                                                        <fieldset id="option-{{ option['product_option_id'] }}"
                                                                                class="option form-group">
                                                                            <label for="option[{{ option['product_option_id'] }}]">{{ option['name'] }} {{ option.required ? '<sup>*</sup>' : '' }} </label>
                    
                                                                            {% for option_value in option.option_value %}
                                                                            <div class="form-check">
                                                                                <label class="form-check-label">
                                                                                    <input type="checkbox" class="form-check-input"
                                                                                        name="option[{{ option['product_option_id'] }}][]"
                                                                                        id="option-value-{{ option_value['product_option_value_id'] }}"
                                                                                        value="{{ option_value['product_option_value_id'] }}" onclick="getCheckboxPrice('{{ option_value['price_value'] }}', '{{ option_value['price_prefix'] }}',this.checked)">
                                                                                    {{ option_value['name'] }}
                                                                                    {% if option_value.price %}
                                                                                        ({{ option_value.price_prefix }}{{ option_value.price }})&#x200E;
                                                                                    {% endif %}
                                                                                </label>
                                                                            </div>
                                                                            {% endfor %}
                                                                        </fieldset>
                                                                        {% endif %}
                    
                                                                        {% if option.type == 'image' %}
                                                                        <fieldset id="option-{{ option['product_option_id'] }}"
                                                                                class="option form-group">
                                                                            <label for="option[{{ option['product_option_id'] }}]">{{ option['name'] }} {{ option.required ? '<sup>*</sup>' : '' }} </label>
                    
                                                                            {% for option_value in option.option_value %}
                                                                            <div class="form-check">
                                                                                <label class="form-check-label">
                                                                                    <input type="radio" class="form-check-input"
                                                                                        name="option[{{ option['product_option_id'] }}]"
                                                                                        value="{{ option_value['product_option_value_id'] }}"
                                                                                        id="option-value-{{ option_value['product_option_value_id'] }}"  onclick="getRadioPrice('{{ option_value['price_value'] }}', '{{ option_value['price_prefix'] }}','{{ option.product_option_id }}', 'radio')"/>
                                                                                    <img src="{{ option_value['image'] }}"
                                                                                        alt="{{ option_value['name'] }}{{ option_value['price'] ? ' ' ~ option_value['price_prefix'] ~ option_value['price'] : ''}}"/>
                                                                                    {{ option_value['name'] }}
                                                                                    {% if option_value.price %}
                                                                                        ({{ option_value.price_prefix }}{{ option_value.price }})&#x200E;
                                                                                    {% endif %}
                                                                                </label>
                                                                            </div>
                                                                            {% endfor %}
                                                                            <input type="hidden" 
                                                                                    id="old_radio_price-{{ option.product_option_id }}" 
                                                                                    value="">
                                                                            <input type="hidden" 
                                                                                    id="old_radio_prefix-{{ option.product_option_id }}" 
                                                                                    value="">
                                                                        </fieldset>
                                                                        {% endif %}
                    
                                                                        {% if option.type == 'text' %}
                                                                        <div id="option-{{ option['product_option_id'] }}"
                                                                            class="option form-group">
                                                                            <label for="option[{{ option['product_option_id'] }}]">{{ option['name'] }} {{ option.required ? '<sup>*</sup>' : '' }} </label>
                    
                                                                            <div class="control">
                                                                                <input type="text" class="form-control"
                                                                                    name="option[{{ option['product_option_id'] }}]"
                                                                                    value="{{ option['option_value'] }}"/>
                                                                            </div>
                                                                        </div>
                                                                        {% endif %}
                    
                                                                        {% if option.type == 'textarea' %}
                                                                        <div id="option-{{ option['product_option_id'] }}"
                                                                            class="option form-group">
                                                                            <label for="option[{{ option['product_option_id'] }}]">{{ option['name'] }} {{ option.required ? '<sup>*</sup>' : '' }} </label>
                    
                                                                            <div class="control">
                                                                                <textarea class="form-control"
                                                                                        name="option[{{ option['product_option_id'] }}]"
                                                                                        cols="40"
                                                                                        rows="5">{{ option['option_value'] }}</textarea>
                                                                            </div>
                                                                        </div>
                                                                        {% endif %}
                    
                                                                        {% if option.type == 'file' %}
                                                                        <div id="option-{{ option['product_option_id'] }}"
                                                                            class="option form-group">
                                                                            <label for="option[{{ option['product_option_id'] }}]">{{ option['name'] }} {{ option.required ? '<sup>*</sup>' : '' }} </label>
                    
                                                                            <div class="control">
                                                                                <input class="form-control button" type="button"
                                                                                    value="{{ lang('button_upload') }}"
                                                                                    id="button-option-{{ option['product_option_id'] }}"/>
                                                                                    <span style="padding-left: 10px" id="filename-option-{{ option['product_option_id'] }}"></span>
                                                                                <input type="hidden"
                                                                                    name="option[{{ option['product_option_id'] }}]"
                                                                                    value=""/>
                                                                            </div>
                                                                        </div>
                                                                        {% endif %}
                    
                                                                        {% if option.type == 'date' %}
                                                                        <div id="option-{{ option['product_option_id'] }}"
                                                                            class="option form-group">
                                                                            <label for="option[{{ option['product_option_id'] }}]">{{ option['name'] }} {{ option.required ? '<sup>*</sup>' : '' }} </label>
                    
                                                                            <div class="control">
                                                                                <input class="form-control date" type="text"
                                                                                    name="option[{{ option['product_option_id'] }}]"
                                                                                    value="{{ option['option_value'] }}"/>
                                                                            </div>
                                                                        </div>
                                                                        {% endif %}
                    
                                                                        {% if option.type == 'datetime' %}
                                                                        <div id="option-{{ option['product_option_id'] }}"
                                                                            class="option form-group">
                                                                            <label for="option[{{ option['product_option_id'] }}]">{{ option['name'] }} {{ option.required ? '<sup>*</sup>' : '' }} </label>
                    
                                                                            <div class="control">
                                                                                <input class="form-control datetime" type="text"
                                                                                    name="option[{{ option['product_option_id'] }}]"
                                                                                    value="{{ option['option_value'] }}"/>
                                                                            </div>
                                                                        </div>
                                                                        {% endif %}
                    
                                                                        {% if option.type == 'time' %}
                                                                        <div id="option-{{ option['product_option_id'] }}"
                                                                            class="option form-group">
                                                                            <label for="option[{{ option['product_option_id'] }}]">{{ option['name'] }} {{ option.required ? '<sup>*</sup>' : '' }} </label>
                    
                                                                            <div class="control">
                                                                                <input class="form-control time" type="text"
                                                                                    name="option[{{ option['product_option_id'] }}]"
                                                                                    value="{{ option['option_value'] }}"/>
                                                                            </div>
                                                                        </div>
                                                                        {% endif %}
                    
                                                                    {% endfor %}
                                                                </div>
                                                            {% endif %}
                                                        </div>
                                                    {% endif %}
                                                <!--############### Printing Document -->
                                                {% if printingDocument == 1 and printable == 1 %}
                                                    {% if covers %}
                                                    <fieldset id="option-cover" class="option form-group">
                                                        <label for="option[cover]">{{ lang('text_cover') }}</label>
                                                        <div style="clear: both;"></div>
                                                        {% for cover in covers %}
                                                        <div class="form-check col-md-3" style="text-align: center;">
                                                                <img src="{{ image(cover.image, 150, 150) }}" alt="">
                                                            <label class="form-check-label">
                                                                <input type="radio" class="form-check-input"
                                                                    name="option[print_cover]"
                                                                    value="{{ cover.price }}" onclick="setCoverName('{{ cover.name[language_id] }}', '{{ cover.price }}')"/>
                                                                {{ cover.name[language_id] }}
                                                                {% if cover.price %}
                                                                    (+{{currency_symbols["left"]}}{{ cover.price }}{{currency_symbols["right"]}})&#x200E;
                                                                {% else %}
                                                                    ({{lang('text_free')}})&#x200E;
                                                                {% endif %}
                                                            </label>
                                                        </div>
                                                        {% endfor %}
                                                        <input type="hidden" 
                                                                id="old_radio_price-cover" 
                                                                value="">
                                                        <input type="hidden" 
                                                                name="option[print_cover_name]"
                                                                id="option-value-cover-name"
                                                                value="">
                                                        <div style="clear: both;"></div>
                                                    </fieldset>
                                                    {% endif %}
                                                    <div id="option-pages" class="option form-group  col-md-6">
                                                        <label for="option-print_pages">{{ lang('text_pages_num') }} <sup>*</sup> </label>
                                                        <div class="control">
                                                            <input type="text" class="form-control" name="print_pages" value="1" id="option-print_pages" onkeyup="setPagesNumber()" />
                                                        </div>
                                                    </div>                                
                                                    <div style="clear: both;"></div>
                                                {% endif %}
                                                <!--############### End Printing Document -->
                                                    <div class="product-options-bottom clearfix">
                                                        {% if ('-1' in price) or ('-1' in special) %}
                                                            <div class="detail-extralink">
                                                                <input type="hidden" name="product_id" size="2" value="{{ product_id }}"/>
                                                                <div class="product-extra-link2">
                                                                    <button type="button" title="{{ lang('button_req_quote') }}"
                                                                            onclick="contact_us('{{ product_id }}');"
                                                                            id="button_req_quote" class="action btn-cart addcart-link">
                                                                        <span>{{ lang('button_req_quote') }}</span>
                                                                    </button>
                                                                    <div id="enquiry-{{ product_id }}"  style="display:none">{{ product_name }}:</div>
                                                                    <a onclick="addToWishList('{{ product_id }}'); return false;" class="action wishlist-link" href="#" title="{{ lang('button_wishlist') }}"><i aria-hidden="true" class="fa fa-heart"></i></a>
                                                                    <a onclick="addToCompare('{{ product_id }}'); return false;" class="iconFix actioncompare-link" href="#" title="{{ lang('button_compare') }}"><i aria-hidden="true" class="fa fa-refresh"></i></a>
                                                                </div>
                                                            </div>
                                                        {% else %}
                                                        <div class="submit-btn">
                                                            <!--############### Printing Document -->
                                                            {% if printingDocument == 1 and printable == 1 %}
                                                            <label for="option[copies]">{{ lang('text_copies_num') }}</label>
                                                            {% endif %}
                                                            <!--############### End Printing Document -->                                    
                                                            <!-- sales booster -->
                                                            {% if salesBooster %}
                                                                {{ include('manymore/template/product/sales_booster.expand') }}
                                                            {% endif %}
                                                            <!-- end sales booster -->
                                                            <div class="tt-wrapper none-margin">
                                                                <div class="tt-row-custom-01">
                                                                    <div class="col-item col-btn-product">
                                                                        <div class="tt-input-counter style-01">
                                                                            <span class="minus-btn"></span>
                                                                            <input type="text" name="quantity" size="15" 
                                                                                    value='{{ minimum_limit }}' id="qty1" name="qty1" maxlength="12"
                                                                                    minlength="1">
                    
                                                                            <span class="plus-btn"></span>
                                                                        </div>                                                    
                                                                    </div>                                                
                                                                    <input type="hidden" name="product_id" size="2" value="{{ product_id }}"/>
                                                                    <!-- Button Cart --->
                                                                    <div class="col-item col-btn-product" style="width: 100%">
                                                                        <button type="submit" title="{{ lang('button_cart') }}"
                                                                        onclick="return false;"
                                                                        id="button-cart" 
                                                                        class="btn btn-lg action btn-cart addcart-link">
                                                                            <i class="icon-f-39"></i>
                                                                            {{ lang('button_cart') }}                                                                        
                                                                        </button>
                                                                    </div>               
                                                                    <!-- Button Cart --->                                 
                                                                    {% if product_designer is defined and product_designer == 1 %}
                                                                        <button type="button" title="{{ lang('pd_btn_text') }}"
                                                                                onclick="showpopup({{ product_id }},'FFFFFF');"
                                                                                class="action btn-cart addcart-link">
                                                                            <span>{{ lang('pd_btn_text') }}</span>
                                                                        </button>
                                                                        <script>
                                                                            function showpopup(pid,ccode) {
                                                                                var frameSrc = 'index.php?route=module/product_designer&product_id='+pid+'&procolor='+ccode;
                                                                                $('#design_pop_frame').attr("src",frameSrc);
                                                                                $('#myModal').modal({show:true});
                                                                            }
                                                                            function closeModel(){
                                                                                $('#myModal').modal('hide');
                                                                            }
                                                                            function addcart(proId,qty,cust_id){
                                                                                addToCartCustom(proId,qty,cust_id);
                                                                            }
                                                                        </script>
                                                                        <style>
                                                                            .modal {
                                                                                text-align: center;
                                                                                padding: 0!important;
                                                                            }
                                                                            .modal:before {
                                                                                content: '';
                                                                                display: inline-block;
                                                                                height: 100%;
                                                                                vertical-align: middle;
                                                                                margin-right: -4px;
                                                                            }
                                                                            .modal-dialog {
                                                                                display: inline-block;
                                                                                text-align: left;
                                                                                vertical-align: middle;
                                                                            }
                                                                        </style>
                                                                    {% endif %}
                                                                </div>
                                                            </div>                                       
                                                        </div>
                                                        {% endif %}
                                                    </div>                                        
                                                </form>
                                            </div>
                                            <!--- Start App && From Prodect -->	
                                            <!--- Start Add Wish List && Compare -->
                                            <div class="tt-wrapper">
                                                <ul class="tt-list-btn">
                                                    <li>
                                                        <a onclick="addToWishList('{{ product_id }}'); return false;" class='btn-link' href="#" title="{{ lang('button_wishlist') }}">
                                                            <i class="icon-n-072"></i>                                                            
                                                            {{ lang('button_wishlist') }}
                                                        </a>
                                                    </li>
                                                    <li>
                                                        <a onclick="addToCompare('{{ product_id }}'); return false;" class='btn-link' href="#" title="{{ lang('button_compare') }}">
                                                            <i class="icon-n-08"></i>                                                            
                                                            {{ lang('button_compare') }}
                                                        </a>
                                                    </li>
                                                </ul>
                                            </div>
                                            <!--- End Add Wish List && Compare -->
                                            <!-- Start Tage -->
                                            {% if show_meta_tags %}
                                            <div class="tt-wrapper">
                                                <div class="tt-add-info">                                    
                                                    <ul>                                    
                                                        <li>
                                                            <span>Tag:</span>
                                                            {% for tag in tags %}
                                                            <a href="{{ tag.href }}">{{ tag.tag }}{{ loop.last == false ? ', ' : '' }}</a>,
                                                            {% endfor %}
                                                        </li>									                                                                        
                                                    </ul>
                                                </div>
                                            </div>
                                            {% endif%}
                                            <!-- End Tage -->
                                            <div class="tt-collapse-block">
                                                <!-- Start Description -->
                                                <div class="tt-item">
                                                    <div class="tt-collapse-title">{{ lang('tab_description') }}</div>
                                                    <div class="tt-collapse-content">
                                                            {{ description }}
                                                    </div>
                                                </div>
                                                <!-- End Description -->
                                                {% if attribute_groups %}
                                                <div class="tt-item">
                                                    <div class="tt-collapse-title">{{ lang('tab_attribute') }}</div>
                                                    <div class="tt-collapse-content">
                                                        <table class="tt-table-03">
                                                            {% for attribute_group in attribute_groups %}
                                                                {% if attribute_group['name'] != 'NOSHOW' %}
                                                                    <thead>
                                                                        <tr>
                                                                            <th colspan="2" class="name-attr">{{ attribute_group['name'] }}</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>                                                                                                                                    
                                                                        {% for attribute in attribute_group['attribute'] %}
                                                                        <tr>
                                                                            <td>{{ attribute['name'] }}:</td>
                                                                            <td>{{ attribute['text'] }}</td>
                                                                        </tr>
                                                                        {% endfor %}
                                                                    </tbody>
                                                                {% endif %}
                                                            {% endfor %}
                                                        </table>
                                                    </div>
                                                </div>
                                                {% endif%}
                    
                                                <!-- Start Review -->
                                                {% if review_status %}
                                                <div class="tt-item" id='review-user'>
                                                    <div class="tt-collapse-title tt-poin-comments">{{ lang('tab_review')|format(reviews_count) }}</div>
                                                    <div class="tt-collapse-content">
                                                        <div class="tt-review-block">
                                                            <!-- <div class="tt-row-custom-02">
                                                                <div class="col-item">
                                                                    <h2 class="tt-title">
                                                                        1 REVIEW FOR VARIABLE PRODUCT
                                                                    </h2>
                                                                </div>
                                                                <div class="col-item">
                                                                    <a href="#">Write a review</a>
                                                                </div>
                                                            </div> -->
                                                            <!-- Start Review -->
                                                            <div>
                                                                <div id="review"></div>
                                                                <div class="page-title-base">
                                                                    <h2 class="title-base" id="review-title">{{ text_your_payment }}</h2>
                                                                </div>
                                                                <div class="">
                                                                    <div class="form-group rating">
                                                                        <b>{{ lang('entry_rating') }}</b>&nbsp;&nbsp;&nbsp;&nbsp;<span>{{ lang('entry_bad') }}</span>&nbsp;
                                                                        <input type="radio" name="rating" value="1"/>
                                                                        &nbsp;
                                                                        <input type="radio" name="rating" value="2"/>
                                                                        &nbsp;
                                                                        <input type="radio" name="rating" value="3"/>
                                                                        &nbsp;
                                                                        <input type="radio" name="rating" value="4"/>
                                                                        &nbsp;
                                                                        <input type="radio" name="rating" value="5"/>
                                                                        &nbsp;<span>{{ lang('entry_good') }}</span>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label for="name" class="control-label">{{ lang('entry_name') }}* </label>
                                                                        <input type="text" name="name" class="form-control" id="name" value=""/>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label for="text">{{ lang('entry_review') }}*</label>
                                                                        <textarea name="text" rows="8" class="form-control" id="text"></textarea>
                                                                        <div class="text-muted">{{ lang('text_note') }}</div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <div class="form-group">
                                                                            <label for="captcha">{{ lang('entry_captcha') }}*</label>
                                                                            <input type="text" name="captcha" style="width: 150px" class="form-control" id="captcha" value=""/>
                                                                            <br/>
                                                                            <img src="index.php?route=product/product/captcha" alt="" id="captcha"/>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="buttons">
                                                                    <div class="pull-right">
                                                                        <a id="button-review" value="{{ lang('button_continue') }}"
                                                                        class="btn btn-inline">{{ lang('button_continue') }}</a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <!-- End Review-->										
                                                        </div>
                                                    </div>
                                                </div>
                                                {% endif %}
                                                <!-- End Review -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="container-indent wrapper-social-icon">
                            <div class="container">   
                                <div class="share">
                                    {# Start ::  Share Butons #}
                                    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-56c3976c6618d23f"></script>
                                    <div class="addthis_sharing_toolbox text-center tt-social-icon justify-content-center"></div>
                                    {# End ::  Share Butons #}
                                </div>                                                                             
                            </div>
                        </div>	
                        <!-- Strt Related Product-->
                        {% set items_products = related_products %}
                        {% set items_count = items_products|length %}
                        {% if related_products %}
                        <div class="container-indent">
                            <div class="container container-fluid-custom-mobile-padding">
                                <div class="tt-block-title text-left">
                                    <h3 class="tt-title-small">
                                        {{ lang('tab_related') }} ({{ related_products|length}})    
                                    </h3>
                                </div>
                                <div class="tt-carousel-products row arrow-location-right-top tt-alignment-img tt-layout-product-item slick-animated-show-js">
                                    {% for product in items_products %}
                                    <div class="col-2 col-md-4 col-lg-3">
                                        <div class="tt-product thumbprod-center">
                                            <div class="tt-image-box">
                                                    <a href="{{ item_product.href }}" class="tt-btn-quickview" data-toggle="modal" data-target="#ModalquickView" data-tooltip="{{ lang('view') }}" data-tposition="{{ current_language.name == 'english' ? 'left' : 'right' }}"></a>                            
                                                    <a onclick="addToWishList('{{ item_product.product_id }}'); return false;" class="action wishlist-link tt-btn-wishlist"
                                                        href="#" title="{{ lang('button_wishlist') }}" data-tooltip="{{ lang('button_wishlist') }}" data-tposition="{{ current_language.name == 'english' ? 'left' : 'right' }}">
                                                    </a>
                                                    <a onclick="addToCompare('{{ product_id }}'); return false;" class=" tt-btn-compare iconFix actioncompare-link" href="#" title="{{ lang('button_compare') }}"
                                                        data-tooltip="{{ lang('button_compare') }}" data-tposition="{{ current_language.name == 'english' ? 'left' : 'right' }}">
                                                    </a>                                                 
                                                <a href="{{ product['href'] }}">
                                                                                                            
                                                    <span class="tt-img">
                                                        <img src="{{ image(product['image'], 370, 370) }}" alt="{{ product['name'] }}">
                                                    </span>
                                                    <span class="tt-img-roll-over">
                                                        <img src="{{ image(product['image'], 570, 570) }}" alt="{{ product['name'] }}">
                                                    </span>
                                                </a>
                                            </div>
                                            <div class="tt-description">                                                
                                                <h2 class="tt-title">
                                                    <a href="{{ product['href'] }}">{{ product['name']}}</a>
                                                </h2>
                                                <div class="tt-price">
                                                    {% if ('-1' in product['price']) or ('-1' in product['special']) %}
                                                    <ins><span class="clickable" onclick="contact_us('{{ product['product_id'] }}');">{{ lang('button_req_quote') }}</span></ins>
                                                    <div id="enquiry-{{ product['product_id'] }}"  style="display:none">{{ product['name'] }}</div>
                                                    {% elseif product['special'] %}
                                                    <ins><span>{{ product['special']}}</span></ins>
                                                    <del><span>{{ product['price']}}</span></del>
                                                    {% else %}
                                                    <ins><span>{{ product['price']}}</span></ins>
                                                    {% endif %}
                                                </div>
                                                <div class="tt-product-inside-hover">
                                                    <div class="tt-row-btn">
                                                        <!-- <a href="#" class="tt-btn-addtocart thumbprod-button-bg" data-toggle="modal" data-target="#modalAddToCartProduct">ADD TO CART</a>                                                        -->
                                                        <a  href="#" 
                                                            onclick="event.preventDefault(); addToCart({{ product.product_id }},1, {{ ('-1' in product.price) or ('-1' in product.special) ? 'true' : 'false' }}); return false;"  
                                                            class="tt-btn-addtocart thumbprod-button-bg">
                                                            ADD TO CART
                                                        </a>                                                        
                                                    </div>
                                                    <!-- <div class="tt-row-btn">
                                                        <a href="#" class="tt-btn-quickview" data-toggle="modal" data-target="#ModalquickView"></a>
                                                        <a href="#" class="tt-btn-wishlist"></a>
                                                        <a href="#" class="tt-btn-compare"></a>
                                                    </div> -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    {% endfor %}                                    
                                </div>
                            </div>
                        </div>                        
                        <!-- Ens Related Product-->
                        {% endif %}
                    </div>
                <!-- New Prodect -->                
            </div>
        </div>	
    </div>
</div>
<!-- End Content -->

<script type="text/javascript" src="{{ jslink('js/libs/TimeCircles.js') }}"></script>
<script type="text/javascript" src="{{ jslink('js/libs/jquery.fancybox.pack.js') }}"></script>


    <script type="text/javascript">
    $(document).ready(function() {
        $('.sellerBox').hide();
        $('.sellerTrigger').click(function(){
            $('.sellerBox').slideToggle();
            event.preventDefault();
        });
    });
    </script>

{% if options %}
    <script type="text/javascript" src="{{ jslink('js/ajaxupload.js?v1') }}"></script>
    {% for option in options %}
        {% if option.type == 'file' %}
            <script type="text/javascript">
                new AjaxUpload("#button-option-{{ option['product_option_id'] }}", {
                    action: 'index.php?route=product/product/upload',
                    name: 'file',
                    autoSubmit: true,
                    responseType: 'json',
                    onSubmit: function (file, extension) {
                        $("#filename-option-{{ option['product_option_id'] }}").text(file);

                        $("#button-option-{{ option['product_option_id'] }}").after(
                            '<img src="catalog/view/theme/default/image/loading.gif" class="loading" style="padding-left: 5px;" />'
                        );
                        $("#button-option-{{ option['product_option_id'] }}").attr('disabled', true);
                    },
                    onComplete: function (file, json) {
                        $("#button-option-{{ option['product_option_id'] }}").attr('disabled', false);
                    
                        $('.error').remove();
                    
                        if (json['success']) {
                            alert(json['success']);
                        
                            $('input[name=\'option[{{ option["product_option_id"] }}]\']').attr('value', json['file']);
                        }
                    
                        if (json['error']) {
                            $('#option-{{ option["product_option_id"] }}').after('<span class="error">' + json['error'] +
                                '</span>');
                        }
                    
                        $('.loading').remove();
                    }
                });
            </script>
        {% endif %}
    {% endfor %}
{% endif %}

<style>
    .stop-scrolling {
        height: 100%;
        overflow: hidden;
    }

    @media only screen and (max-width:480px) {
        .dialog-btn-size {width: 90%; font-size: 4.25em; height: 30px !important;}
    }
</style>

<script type="text/javascript"><!--
    $(document).on('click', '#review .pagination a', function () {
        $('#review').fadeOut('slow');

        $('#review').load(this.href);

        $('#review').fadeIn('slow');

        return false;
    });

    $('#review').load('index.php?route=product/product/review&product_id={{ product_id }}');

    $('#button-review').bind('click', function () {
        $.ajax({
            url: 'index.php?route=product/product/write&product_id={{ product_id }}',
            type: 'post',
            dataType: 'json',
            data: 'name=' + encodeURIComponent($('input[name=\'name\']').val()) + '&text=' + encodeURIComponent($('textarea[name=\'text\']').val()) + '&rating=' + encodeURIComponent($('input[name=\'rating\']:checked').val() ? $('input[name=\'rating\']:checked').val() : '') + '&captcha=' + encodeURIComponent($('input[name=\'captcha\']').val()),
            beforeSend: function () {
                $('.success, .warning').remove();
                $('#button-review').attr('disabled', true);
                $('#review-title').after('<div class="attention alert alert-warning"><img src="{{ asset('image/loading.gif') }}" alt="" /> {{ lang('text_wait') }}</div>');
            },
            complete: function () {
                $('#button-review').attr('disabled', false);
                $('.attention').remove();
            },
            success: function (data) {
                if (data['error']) {
                    $('#review-title').after('<div class="warning alert alert-danger">' + data['error'] + '</div>');
                }

                if (data['success']) {
                    $('#review-title').after('<div class="success alert alert-success">' + data['success'] + '</div>');

                    $('input[name=\'name\']').val('');
                    $('textarea[name=\'text\']').val('');
                    $('input[name=\'rating\']:checked').attr('checked', '');
                    $('input[name=\'captcha\']').val('');
                }
            }
        });
    });
    //--></script>

<script type="text/javascript" src="expandish/view/javascript/product/options_update_price.js"></script>
<script type="text/javascript">
    // Price per meter
    function showSetMeterModal(){
        $('#myModalPrMeter').modal({show:true});
    }
    function setMeterAction(closeAction){        
        let wd = $('#set_meter_w').val();
        let ln = $('#set_meter_l').val();
        let dr = $('#set_meter_d').val();
        let drw = $('#set_meter_dw').val();

        let dimention = wd * ln;
        let permiter = (wd * 2) + ( ln * 2 );

        let prcMain = parseFloat('{{ price_meter_data['main_meter_price'] }}');
        let prc_perc_main = '{{ price_meter_data['main_price_percentage'] }}';

        if(prc_perc_main != '')
           prc_perc_main = parseFloat(prc_perc_main);
        else
           prc_perc_main = 0;

        let mainPKsize = parseFloat('{{ price_meter_data['main_package_size'] }}');
        let mainBoxs = parseFloat(Math.ceil(dimention/mainPKsize));
       
        /* Main unit*/
        let Underlaymen = (mainBoxs * mainPKsize);
        let addingPercentageMain = ((prc_perc_main/100)*Underlaymen);
        //Underlaymen = Underlaymen + addingPercentageMain;
        let totalPriceMain = ((Underlaymen + addingPercentageMain) * prcMain);

        /* metal profiles*/
        let metalPKsize = parseFloat('{{ price_meter_data['metalprofile_package_size'] }}');
        let allDoorWidth = drw * dr;
        let metalProfiles = 0;
        if(allDoorWidth){
            metalProfiles = Math.ceil(allDoorWidth/metalPKsize);
        }

        /* skirtings */
        let skiPKsize = parseFloat('{{ price_meter_data['skirtings_package_size'] }}');
        let skiBoxs = Math.ceil(permiter/skiPKsize);
        let skirtings = skiBoxs * skiPKsize;
        if(!skirtings)
            skirtings = 0;

        let currL = '{{ currency_symbols["left"] }}';
        let currR = '{{ currency_symbols["right"] }}';

        

       let totalPriceSki = 0;
       {% if price_meter_data['skirtings_status'] == 1 %}
            let prcSki = '{{ price_meter_data['skirtings_meter_price'] }}';
            if(prcSki != '')
               prcSki = parseFloat(prcSki);
            else
               prcSki = 0;
            let prc_perc_ski = '{{ price_meter_data['skirtings_price_percentage'] }}';
            if(prc_perc_ski != '')
               prc_perc_ski = parseFloat(prc_perc_ski);
            else
               prc_perc_ski = 0;

            if(prcSki > 0){
                let addingPercentageSki = ((prc_perc_ski/100)*skirtings);
                totalPriceSki = ((skirtings + addingPercentageSki) * prcSki);
            }
       {% endif %}

       let totalPriceMetal = 0;
       {% if price_meter_data['metalprofile_status'] == 1 %}
            let prcMetal = '{{ price_meter_data['metalprofile_meter_price'] }}';
            if(prcMetal != '')
               prcMetal = parseFloat(prcMetal);
            else
               prcMetal = 0;
            let prc_perc_metal = '{{ price_meter_data['metalprofile_price_percentage'] }}';
            if(prc_perc_metal != '')
               prc_perc_metal = parseFloat(prc_perc_metal);
            else
               prc_perc_metal = 0;


            if(prcMetal > 0){
                let addingPercentageMetal = ((prc_perc_metal/100)*metalProfiles);
                totalPriceMetal = ((metalProfiles + addingPercentageMetal ) * prcMetal);
        }
       {% endif %}

        let totalPrice = parseFloat(totalPriceMain) + parseFloat(totalPriceSki) + parseFloat(totalPriceMetal);
        if(wd > 0 && ln > 0){
            $('#set_meter_wl').val(dimention.toFixed(2));
            $('.prMeterMain').text(Underlaymen.toFixed(2));
            $('.prMeterP').text(permiter);
            $('.prMeterMainBoxs').text(mainBoxs);
            $('.prMeterSki').text(skirtings.toFixed(2));
            $('.prMeterMetal').text(metalProfiles);

            $('.prMeterPrice').text(currL + totalPrice.toLocaleString(2) + currR);
            if(closeAction){
                $('#myModalPrMeter').modal('hide');
            }
            $('#set_meter_on').val(1);
        } 
    }
    //////////////////////////////

    $('#button-cart, #button-cart-sb').bind('click', function() {

        {% if pricePerMeters == 1 and price_meter_data['main_status'] == 1 %}
            if($('#set_meter_on').val() == 0){
                $('#myModalPrMeter').modal({show:true});
                return;
            }
        {% endif %}

        $.ajax({
            url: 'index.php?route=checkout/cart/add',
            type: 'post',
            data: $('.product-add-form input[type=\'text\'], .product-add-form input[type=\'hidden\'], .product-add-form input[type=\'radio\']:checked, .product-add-form input[type=\'checkbox\']:checked, .product-add-form select, .product-add-form textarea'),
            dataType: 'json',
            success: function(json) {
                if(json['success'] == 'affiliate_link') {
                    document.location = json['affiliate_link'];
                    return;
                }

                $('.alert-success, .alert-warning, .alert-attention, .alert-information, .alert-error').remove();

                if (json['error']) {
                    /*
                    if (json['error']['option']) {
                        for (i in json['error']['option']) {
                            $('#option-' + i).after('<span class="error">' + json['error']['option'][i] + '</span>');
                        }
                    }
                    */
                    if (json['error']['profile']) {
                        $('select[name="profile_id"]').after('<span class="error">' + json['error']['profile'] + '</span>');
                    }
                }

                if (json['success']) {
                    $('#notification').html('<br><div class="alert alert-success alert-dismissible" style="display: none;" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>' + json['success'] + '</div>');
                    
                    $('.alert-success').fadeIn('slow');
                    
                    $('#counterLabel').html(json['product_count']);
                    $('#minicounterLabel').html(json['product_count']);

                    $.get('index.php?route=common/cart', function(html) {
                        $('#cartDropList').html(html);
                        $('#minicartDropList').html(html);
                    });

                    if (json['enable_order_popup'] != '1')
                        $('html, body').animate({ scrollTop: 0 }, 'slow');

                    if (json['enable_order_popup'] == '1') {
                        $('head').append("<style type='text/css'>.customAddtoCart .ui-dialog-titlebar.ui-widget-header.ui-corner-all.ui-helper-clearfix {display: none;} .customAddtoCart div#add-to-cart-dialog {min-height: 1px !important;} [dir=rtl] .ui-widget {font-family: 'Droid Arabic Kufi', 'droid_serifregular' !important;}</style>");

                        $('body').append('<div id="add-to-cart-dialog" style="display:none;"><div style="margin: 13px 0;">' + json['text_cart_dialog'] + '</div></div>');
                        $('body').addClass('stop-scrolling');

                        $("#add-to-cart-dialog").dialog({
                            modal: true,
                            draggable: false,
                            resizable: false,
                            position: { my: "center", at: "center", of: window },
                            show: 'blind',
                            hide: 'blind',
                            width: 500,
                            dialogClass: 'ui-dialog-osx customAddtoCart',
                            buttons: [{
                                text: json['text_cart_dialog_continue'],
                                'class': 'dialog-btn-size',
                                click: function() {
                                    $(this).dialog("close");
                                }
                            },
                                {
                                    text: json['text_cart_dialog_cart'],
                                    'class': 'dialog-btn-size',
                                    click: function() {
                                        window.location.href = json['cart_link'];
                                    }
                                }
                            ],
                            close: function() {
                                $('body').removeClass('stop-scrolling');
                            }
                        });
                    }
                }

                if (typeof(json['error']) != "undefined") {
                    if(typeof(json['error']['option']) != "undefined") {
                    $.each(json['error']['option'], function(index, error) {
                        $('#notification').html('<br><div class="alert alert-warning alert-dismissible" style="display: none;" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>' + error + '</div>');

                        $('.alert-warning').fadeIn('slow');

                        $('html, body').animate({ scrollTop: 0 }, 'slow');
                    });
                    }
                    else{
                    $.each(json['error'], function(index, error) {
                        $('#notification').html('<br><div class="alert alert-warning alert-dismissible" style="display: none;" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>' + error + '</div>');

                        $('.alert-warning').fadeIn('slow');

                        $('html, body').animate({ scrollTop: 0 }, 'slow');
                    });    
                    }
                }
            }
        });
    });

    
    function addToWishList(product_id) {
	$.ajax({
		url: 'index.php?route=account/wishlist/add',
		type: 'post',
		 data: $('.product-add-form input[type=\'text\'], .product-add-form input[type=\'hidden\'], .product-add-form input[type=\'radio\']:checked, .product-add-form input[type=\'checkbox\']:checked, .product-add-form select, .product-add-form textarea'),
		dataType: 'json',
		success: function(json) {
			$('.alert-success, .alert-warning, .alert-attention, .alert-information').remove();
						
			if (json['success']) {
				$('#notification').html('<br><div class="alert alert-success alert-dismissible" style="display: none;" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>' + json['success'] + '</div>');
				
				$('.alert-success').fadeIn('slow');
				
				$('#wishlist-total').html(json['total']);
				
				$('html, body').animate({ scrollTop: 0 }, 'slow');
			}	
		}
	});
}
   </script>
    
<script type="text/javascript" src="expandish/view/javascript/jquery/ui/jquery-ui-timepicker-addon.js"></script>


<script type="text/javascript"><!--
    $(document).ready(function () {
        $('.reviewTrigger').click(function(){
            $('.hoz-tab-detail  li').removeClass('active');
            $('#reviewTab').addClass('active');
            $('html,body').animate({scrollTop: $(".hoz-tab-detail").offset().top - 150},'slow');
        });

        $('.date').datepicker({dateFormat: 'yy-mm-dd'});
        $('.datetime').datetimepicker({
            dateFormat: 'yy-mm-dd',
            timeFormat: 'h:m'
        });
        $('.time').timepicker({timeFormat: 'h:m'});

        $('.gallery-control ul li:first-child').addClass("active");
         $('.gallery-control ul li:first-child a').addClass("active");
    });
    //-->
</script>

{% if rentalProducts == 1 %}
    <script type="text/javascript">
        var specialNumber = '{{ rental_special ? rental_special : rental_price }}';
        var priceNumber = '{{ rental_price  }}';
        var maxRentDays = '{{ max_rental_days }}';
        var currencySymbols = JSON.parse('{{ currency_symbols|json_encode }}');
    </script>
    <script type="text/javascript" src="{{ commonLink('js/products/rentalProducts.js') }}"></script>
{% endif %}

<script type="application/ld+json">
{
  "@context": "http://schema.org/",
  "@type": "Product",
  "name": "{{ product_name }}",
  "image": [
    "{{ thumb }}"{% if images %},{% endif %}
    {% for addimage in images %}
    "{{ addimage.thumb }}"{% if not loop.last %},{% endif %}
        {% endfor %}
   ],
  "description": "{{ description|striptags }}",
  {# "mpn": "925872", #}
  "brand": {
    "@type": "Thing",
    "name": "{{ manufacturer }}"
  },
  {% if reviews_count > 0 and rating > 0 %}
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "{{ rating }}",
    "reviewCount": "{{ reviews_count ? reviews_count : 1 }}"
  },
  {% endif %}
  "offers": {
    "@type": "Offer",
    "priceCurrency": "{{ currency_code }}",
    "price": "{% if not special_number %}{{ price_number }}{% else %}{{ special_number }}{% endif %}",
    {# "priceValidUntil": "2020-11-05", #}
    {# "itemCondition": "http://schema.org/UsedCondition", #}
    "availability": {% if quantity %}"http://schema.org/InStock"{% else %}"http://schema.org/OutOfStock"{% endif %},
    "seller": {
      "@type": "Organization",
      "name": "{{ config('config_name') }}"
    }
  }
}
</script>

{% if option_images.enabled %}
<script type="text/javascript">
    var console=console||{"log":function(){},"debug":function(){}};
    var poip_options_settings = {{ option_images.product_settings|json_encode() }};
    var poip_settings = {{ option_images.settings|json_encode() }};
    var poip_images = {{ option_images.images|json_encode() }};
    var poip_images_by_options = {{ option_images.images_by_options|json_encode() }};
    var poip_product_option_ids = {{ option_images.product_option_ids|json_encode() }};
</script>  


<script type="text/javascript" src="expandish/view/theme/{{ Template_Name }}/js/imagepro.js"></script>
{% endif %}        
